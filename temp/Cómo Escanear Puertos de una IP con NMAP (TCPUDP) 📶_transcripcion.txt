Cómo descubrir puertos y servicios con enema puertos por aquí y puertos por allá lo primero de todo que tenemos que hacer es cuando queremos descubrir puertos con nmap una vez ya hemos descubierto el activo vale chicos es muy importante siempre primero antes de nada saber que hay un activo por ahí y cuando sabemos que ese activó está activo que hay hay un dispositivo conectado ya eh pasamos a la parte de escaneo de puertos de acuerdo Entonces vamos a desactivar la detección de juegos porque muchas veces vamos a tener eh con el tema de las redes hay medidas de seguridad perimetrales que nos van a tapar el acceso por si tiramos con el descubrimiento de juegos porque hay Incluso en máquinas de hack the Box o de tryhard me tienen el el la erp quitado de acuerdo para que no puedas hacer ahí Pink y descubrimiento directamente Entonces vamos a utilizar esta flag menos pn para decirle que lo que queremos hacer es quitar la detección de Host así como con menos sn quitábamos la parte del descubrimiento Pues con menos pn quitamos la parte del descubrimiento de Host vamos a lanzar el nmap ahora mismo con la dirección IP 10.10.5 le vamos a lanzar el menos t5 para que vaya más rápido ya hemos visto todo el tema de los tiempos así que por esto no debería haber ningún problema ninguna duda podemos lanzar el escaneo eh tcp Connect y luego Ahora aquí le poníamos el menos pn de acuerdo para que no haga ese descubrimiento de Host y ahora veremos que nos va a sacar por defecto los 1000 puertos más importantes o va a escanear los 1000 puertos más importantes y como hemos visto en o elecciones anteriores Pues solo hay abiertos 33 puestos de acuerdo pero porque estamos escaneando 1000 ahora luego posteriormente vamos a ver cómo podemos escanear absolutamente todos y nada aquí vemos aquí tenemos los puertos el protocolo de transporte que está utilizando en este caso es tcp y el estado de los mismos que está en Open junto al servicio que está corriendo en cada uno de los puertos flash que vamos a ver es la opción menos menos Open de acuerdo y esto lo que nos va a facilitar es muchísimo la vida chicos a la hora de que eh jugar con los puertos abiertos porque ahora vosotros lo veis muy bonito aquí que salen todos los puertos en abierto Pero hay veces que no que salen encerrado o en filter o en graphit por ejemplo tengo un escaneo por aquí que eh veis está Close está filtered está bien te podría ser aquí un ra Entonces esto no no Mola tío porque me ensucia la salida yo para qué quiero que me saques que este Puerto no me lo saqué directamente me importa una mierda vale o sea así Hablando Hablando en plata yo quiero quedarme solo con los opens Pues con esta opción con esta flag de menos Open pues lo podemos ver vamos a añadirla por aquí lo que pasa es que ya nos salen eh directamente nos van a salir todos abiertos vale Pero bueno vamos a a dejarla por aquí y mientras esto se ejecuta vamos a ser prácticos y vamos a ver gente opción que tenemos que escanear absolutamente todos los puertos vale Ya sabéis que hay 65.535 puertos de acuerdo Bueno 65.536 del 0 al 65 535 no le hagas caso a esto del uno vale porque me he colado al final esto es una base de potencia potencia 2 que ya sabéis que al final toda la informática funciona a base de potencias de dos de acuerdo Entonces con la opción menos p- vamos a escanear absolutamente todos los puertos de acuerdo Esto sí eso sí va a tardar un poquito un poquito bastante de acuerdo vamos a ver si ya he acabado el escaneo anterior vale Sí hemos visto que sí y no hay nada nada nuevo y ahora yo le añado aquí en la opción para escanear absolutamente todos los puertos vale eh una cosa también que os quiero comentar es que da igual el orden dónde lo pongáis vale en emails lo suficientemente inteligente para eh ejecutarlo todo o saber dónde va cada cosa por cierto he creado una guía PDF un montón de información sobre nmap si la quieres Solo tienes que acceder al link de la descripción y dejarme por aquí tu nombre y tu correo para que te la pueda enviar vale vemos que ya ha finalizado en 82 segundos más o menos aproximadamente 1 minuto y medio y vemos que nos ha sacado en este caso una auténtica barbaridad bueno tampoco tanta tanta barbaridad Pero si unos cuantos unos cuantos más vemos aquí un poquito más de detalle no que hay 47.512 cerrados que te han dado un connection refused y luego 17.997 filtrados de acuerdo que no han recibido respuesta y nada aquí los tenemos todos vemos aquí incluso que hay algunos puertos en unos puertos súper altos 957.630 el 55.908 y luego hay unos puertos ya más normales más estándares de acuerdo recordar que los puertos se clasifican en tres tipos del 0 al 10,000 al 1024 y ya del 1024 Eh no cuando era del 1024 al 10,000 o al 40 y pico mil es que no no me acuerdo chicos Lo importante es que sepáis que de cero al 1024 son los puertos más importantes de acuerdo lo que no implica que luego hayan puertos que no son importantes de acuerdo por ejemplo en el 3306 en el 3306 tenéis ahí sql o en el 5432 postres o en el en el en el 3389 tenéis rdp de acuerdo o sea siempre que intentar cubrirlo todo obviamente hay que contextualizar siempre con el tiempo auditoría que tengamos vamos ahora a ver también Cómo podemos escanear puertos específicos tan solo con la opción menos p seguida de los distintos puertos que queremos escanear de acuerdo O sea al final vosotros pensar que lo que puede pasar es que tú solo estés auditando servicios que crees que son de interés particular o tienes poco tiempo de auditoría y vas a tirar a los puertos más críticos no como un 3389 un 3306 puertos de base de datos puertos smb el 44 cinco al uno tres nueve el puerto eh ssh Por si tiene alguna credencial Por defecto y tú puedes acceder a través de este esta conexión ssh o el puerto 23 de acuerdo Entonces lo que vamos a hacer va a ser poner unos cuantos de los que hemos visto por aquí en la en la máquina anterior y vamos a utilizar exactamente el mismo Comando Solo que vamos a cambiar y vamos a poner aquí con menos p puertos que yo crea que son interesantes no Entonces yo pondría por ejemplo aquí el puerto 21 22 el 23 el 445 por ejemplo el 3389 el 33.06 y luego por ejemplo si queréis solo escanear puertos web pues eh Bueno mira vamos a hacer una cosa vamos a dividir por aquí la terminal y me voy a copiar el El Comando eh Adiós me ha creado por completo El Comando vale ya está arreglado Pues ahora yo selecciono esto lo quiero copiar y lo pegó por aquí y en está de aquí arriba que la vamos a lanzar ya vamos a escanear como puertos críticos y luego Aquí vamos a escanear los puertos típicos eh web que sería el 80 el 443 el 8080 el 8000 el 8008 el 8443 de acuerdo o 433 no 443 Entonces yo le pongo eh esto por aquí y veis aquí ya me ha sacado los puertos de que yo considero más críticos abiertos Entonces yo a lo mejor empezaría por estos de aquí y luego pues eh paralelamente Mejor dicho vemos que queremos escanear todos los servicios web y le metemos estos que son así los que más suelen utilizarse de acuerdo también puede ser el 888 hay varios de acuerdo porque no tiene por qué estar un único servicio asociado a un único Puerto lo que acabamos de ver es solo una pequeña parte de todo el potencial que tiene más y para desatar y aprender al 100% te recomiendo que mires la guía que te dejo la descripción mires el siguiente video del curso o el curso completo que te vas a tener aquí un besito muy grande chicos Y como siempre nos vemos en el próximo video